---
title: Receiving notifications | Customs Declarations End-to-End Service Guide
weight: 4
---

#Receiving notifications

## Notifications
At various stages of the asynchronous customs declaration process your application will need to be notified by HMRC systems of certain events resulting from interactions with one of the CDS APIs. 

As a bare minimum for each declaration you can expect to receive a notification of acceptance and clearance, though others may be sent.

CDS DMSxxx notifications will be routed primarily to the submitter of the declaration. It is the responsibility of the submitter to then route the notifications to the declarant if appropriate.

All of the CDS APIs that use notifications offer the choice of either push or pull notifications. Part of an application’s [subscription](/documentation/set-up-developers.html#api-subscription-model) to a CDS API defines how notifications from that API will be delivered to it.

If the [subscription](/documentation/set-up-developers.html#api-subscription-model) specifies a push notification callback URL, that will indicate that the API should use push notifications. Notifications generated by this API will be sent to the supplied callback URL by CDS via this ‘channel’.

If the [subscription](/documentation/set-up-developers.html#api-subscription-model) omits the callback URL, that will indicate to the API that pull notifications are to be used. Your application will need to retrieve notifications from CDS via the [pull API](/api-documentation/docs/api/service/api-notification-pull).

Each subscription of your application to an API can configure different notification mechanisms as required, so you can choose different notification mechanisms for different APIs.


##Push notifications

CDS ‘pushes’ notifications as they are generated via the specified channel to the trade systems. The trade systems need to always be ready to receive them (at the callback URL specified in the subscription).

If CDS successfully delivers a notification it cannot thereafter be resent. There are no API endpoints that would enable a re-delivery to be requested.

If CDS fails to deliver a notification (due to the specified callback URL not being contactable or the trade system responding with a non-200 HTTP response code) then it will reattempt to deliver the notification using the following rules:

<table>
  <tr><td></td><td></td></tr>
  <tr>
    <td><strong>Failure</strong></td>
    <td><strong>Retry Behaviour</strong></td>
  </tr>
  <tr>
    <td>Callback URL does not respond or responds with a 5XX HTTP code</td>
    <td>
        CDS will retry to send the failed notification every 30 seconds until successful or until the notification expires (2 weeks from the original date of sending).
        <br><br>
        All other notifications due to be sent through the same subscription channel will be blocked until the issue is resolved. 
    </td>
  </tr>
  <tr>
    <td>Callback URL responds with a 1XX, 3XX or 4XX HTTP code</td>
    <td>CDS will retry to send the notification back to the trade system every 2 hours until successful or until the notification expires (2 weeks from the original date of sending).
        <br><br>
        Other notifications to the same subscription channel will continue unaffected.
    </td>
  </tr>
</table>


##Pull notifications

Using this strategy the application ‘pulls’ notifications from CDS when it is ready to do so.

The Pull API endpoints allow identification and retrieval of selected notifications via a range of identifiers.

Pull retrieval also allows (within limits) previously read notifications to be re-read if necessary.

For more details about using the API please see the [Pull notifications API documentation](/api-documentation/docs/api/service/api-notification-pull) on the Dev Hub.

##Notification Types and definitions

<table>
  <tr><td></td><td></td><td></td><td></td><td></td></tr>
  <tr>
    <td><strong>DMS code</strong></td>
    <td><strong>Notification type</strong></td>
    <td><strong>Description</strong></td>
    <td><strong>Sub-process found</strong></td>
    <td><strong>Mapping to CHIEF equivalent</strong></td>
  </tr>
  <tr>
    <td>01</td>
    <td>DMSACC</td>
    <td>With this message the submitter is informed that the declaration has been legally accepted</td>
    <td>Validate Declaration</td>
    <td></td>
  </tr>
  <tr>
    <td>02</td>
    <td>DMSRCV</td>
    <td>With this message the submitter is informed that the message has been registered. This can apply to pre-lodged declarations as well as additional messages.</td>
    <td>Validate Declaration</td>
    <td>H2/P2</td>
  </tr>
  <tr>
    <td>03</td>
    <td>DMSREJ</td>
    <td>With this message the submitter is informed that the received message has been rejected. This can apply to declarations and additional messages.</td>
    <td>Validate Declaration</td>
    <td>Cancellation Refusal: N3/S3</td>
  </tr>
  <tr>
    <td>05</td>
    <td>DMSCTL</td>
    <td>This message informs the submitter that Customs intends to physically examine the goods.This will only be received when the goods are on hand.</td>
    <td>Initiate Control</td>
    <td>E1 (Imports) / X1 (Exports)</td>
  </tr>
  <tr>
    <td>06</td>
    <td>DMSRES</td>
    <td>The submitter is informed that corrections have been applied to the declaration by the trader, or as a result of physical inspection by customs (latter not likely to be triggered).</td>
    <td>Clear Declaration</td>
    <td>N/A</td>
  </tr>
  <tr>
    <td>08</td>
    <td>DMSROG</td>
    <td>This message informs the submitter that the goods can now be released. Note that this is different to clearance as it implies that the debt calculated is not yet finalised.</td>
    <td>Clear Declaration</td>
    <td>Currently implied by N5 / IVL notification</td>
  </tr>
  <tr>
    <td>09</td>
    <td>DMSCLE</td>
    <td>This message informs the submitter that the declaration is now cleared, and by implication, the goods can be released.</td>
    <td>Clear Declaration</td>
    <td>Contained in N5 report if non-inventory linked. If inventory linked, trader will receive a notification from the inventory system.</td>
  </tr>
  <tr>
    <td>10</td>
    <td>DMSINV</td>
    <td>This message informs the submitter that the declaration has now been cancelled. This can be as a result of a trader-initiated invalidation, or system-initiated.</td>
    <td>Invalidate Declaration</td>
    <td>
        Cancellation Approval: N4/S4</br>
        Goods Disposal Advice: S9
    </td>
  </tr>
  <tr>
    <td>11</td>
    <td>DMSREQ</td>
    <td>With this message the submitter is informed of the acceptance or denial of the additional message submitted to customs. In the case of a denial, the reason is indicated.</td>
    <td>Handle Additional Message</td>
    <td>N3/S3, N4/S4</td>
  </tr>
  <tr>
    <td>13</td>
    <td>DMSTAX</td>
    <td>
        The submitter is informed of the duties liable with this message. 
        It can either inform on what has been reserved against a deferment account or similar method of payment. 
        Alternatively, it can be used as a payment instruction for immediate methods of payment. 
        In the immediate payment scenario, a payment reference is also provided.
    </td>
    <td>Handle Customs Debt</td>
    <td>Contained within E2</td>
  </tr>
  <tr>
    <td>14</td>
    <td>DMSCPI</td>
    <td>
        This message informs the submitter of the insufficient balance against a deferred method of payment. 
        The relevant financial party will need to take action to rectify the situation before the goods can be released.
    </td>
    <td>Handle Customs Debt</td>
    <td>E9 and X9</td>
  </tr>
  <tr>
    <td>15</td>
    <td>DMSCPR</td>
    <td>
        This message is a reminder regarding the need to take action on the insufficient balance against a deferred method of payment. 
        It can also be used as a reminder to make an immediate payment.
    </td>
    <td>Handle Customs Debt</td>
    <td>N/A</td>
  </tr>
  <tr>
    <td>16</td>
    <td>DMSEOG</td>
    <td>EXPORTS ONLY. The message informs the submitter that the goods have now exited the customs union.</td>
    <td>Monitor After Release</td>
    <td>Indicated by ECS via IE518</td>
  </tr>
  <tr>
    <td>17</td>
    <td>DMSEXT</td>
    <td>
        This message informs the submitter that the declaration needs to be handled manually. 
        Only used in exceptional circumstances where the system cannot handle the declaration.
    </td>
    <td>Handle Irregularities</td>
    <td>N/A</td>
  </tr>
  <tr>
    <td>18</td>
    <td>DMSGER</td>
    <td>
        EXPORTS ONLY. This message informs the submitter that the exit results have not yet been received by the Export system. 
        This could be a trigger to submit an alternative proof of exit.
    </td>
    <td>Monitor After Release</td>
    <td>S0</td>
  </tr>
  <tr>
    <td>50</td>
    <td>DMSALV</td>
    <td>This message informs the submitter that a decision has been made by Defra that will delay clearance of the goods.</td>
    <td>Perform Control</td>
    <td>Contained within E0</td>
  </tr>
</table>

##Notification message structure

Notification messages are XML documents. Their schema definitions and examples of the XML messages can be found below.

New versions of the schema and sample messages are released first into the sandbox environment and released into the production environment at a later date. Please click on the links below for the desired target environment:

- sandbox environment
 - [wco declaration schemas and annotated XML samples](/documentation/resources/sandbox/wco-declaration-schemas.zip)

 
- production environment
 - [wco declaration schemas and annotated XML samples](/documentation/resources/production/wco-declaration-schemas.zip)
 